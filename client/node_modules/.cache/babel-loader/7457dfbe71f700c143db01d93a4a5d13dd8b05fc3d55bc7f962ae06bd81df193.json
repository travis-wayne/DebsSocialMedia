{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\nconst react_1 = require(\"react\");\nconst moment_1 = __importDefault(require(\"moment\"));\nconst material_1 = require(\"@mui/material\");\nconst PhotoCameraOutlined_1 = __importDefault(require(\"@mui/icons-material/PhotoCameraOutlined\"));\nconst ReactImageFileToBase64 = ({\n  onCompleted,\n  multiple,\n  CustomisedButton,\n  preferredButtonText\n}) => {\n  const inputRef = (0, react_1.useRef)(null);\n  //TRIGGERS THE FILE TO OPEN DEVICE FOLDER FOR IMAGE SELECTION\n  const handleFilesSelection = () => {\n    var _a;\n    inputRef.current.value = \"\";\n    (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.click();\n  };\n  const handleOnInputFileChange = event => {\n    const selectedFiles = event.target.files;\n    const base64Files = [];\n    //event.target.files  RETURN A FILELIST TYPE WHICH IS AN OBJECT\n    //CONVERT SELECTED FILES DOCUMENT TO ARRAY AND MAP THROUGH\n    Array.from(selectedFiles).map(file => {\n      //DOUBLE CHECK IF FILE TYPE MATCHES ACCEPTED EXTENSION CRITERIA\n      if (!/\\.(jpeg|jpg|png|gif)$/i.test(file.name)) return console.log(\"blah\");\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      return reader.onload = () => {\n        //OBJECT OF FILE THAT'LL BE RETURNED TO THE USER\n        const fileInfo = {\n          file_name: file === null || file === void 0 ? void 0 : file.name,\n          file_size: `${Math.round(file.size / 1000)} KB`,\n          file_type: file === null || file === void 0 ? void 0 : file.type,\n          last_modified: (0, moment_1.default)(file.lastModified).format(),\n          base64_file: reader.result,\n          default_file: file\n        };\n        base64Files.push(fileInfo);\n        if (base64Files.length === Array.from(selectedFiles).length) {\n          onCompleted(base64Files);\n        }\n      };\n    });\n  };\n  return (0, jsx_runtime_1.jsxs)(\"label\", Object.assign({\n    htmlFor: \"select_images\",\n    className: \"react-image-file-to-base64\"\n  }, {\n    children: [(0, jsx_runtime_1.jsx)(\"input\", {\n      type: \"file\",\n      name: \"create_media_input\",\n      id: \"create_media_input\",\n      accept: \"image/png, .jpeg, .jpg, .gif\",\n      ref: inputRef,\n      multiple: multiple,\n      onChange: handleOnInputFileChange,\n      style: {\n        display: \"none\"\n      }\n    }), CustomisedButton ? (0, jsx_runtime_1.jsx)(CustomisedButton, {\n      triggerInput: handleFilesSelection\n    }) : (0, jsx_runtime_1.jsxs)(material_1.Button, Object.assign({\n      variant: \"contained\",\n      onClick: handleFilesSelection,\n      style: {\n        textTransform: \"initial\"\n      }\n    }, {\n      children: [(0, jsx_runtime_1.jsx)(PhotoCameraOutlined_1.default, {\n        style: {\n          marginRight: \"7px\"\n        }\n      }), preferredButtonText ? preferredButtonText : \"Select files\"]\n    }))]\n  }));\n};\nexports.default = ReactImageFileToBase64;\nReactImageFileToBase64.defaultProps = {\n  multiple: false\n};","map":{"version":3,"names":["react_1","require","moment_1","__importDefault","material_1","PhotoCameraOutlined_1","ReactImageFileToBase64","onCompleted","multiple","CustomisedButton","preferredButtonText","inputRef","useRef","handleFilesSelection","current","value","_a","click","handleOnInputFileChange","event","selectedFiles","target","files","base64Files","Array","from","map","file","test","name","console","log","reader","FileReader","readAsDataURL","onload","fileInfo","file_name","file_size","Math","round","size","file_type","type","last_modified","default","lastModified","format","base64_file","result","default_file","push","length","jsx_runtime_1","jsxs","Object","assign","htmlFor","className","children","jsx","id","accept","ref","onChange","style","display","triggerInput","Button","variant","onClick","textTransform","marginRight","exports","defaultProps"],"sources":["../src/index.tsx"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AAAA,MAAAA,OAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAC,eAAA,CAAAF,OAAA;AACA,MAAAG,UAAA,GAAAH,OAAA;AACA,MAAAI,qBAAA,GAAAF,eAAA,CAAAF,OAAA;AASA,MAAMK,sBAAsB,GAAGA,CAAC;EAC9BC,WAAW;EACXC,QAAQ;EACRC,gBAAgB;EAChBC;AAAmB,CACJ,KAAI;EACnB,MAAMC,QAAQ,GAAG,IAAAX,OAAA,CAAAY,MAAM,EAAmB,IAAI,CAAC;EAE/C;EACA,MAAMC,oBAAoB,GAAGA,CAAA,KAAK;;IAChCF,QAAQ,CAACG,OAAQ,CAACC,KAAK,GAAG,EAAE;IAC5B,CAAAC,EAAA,GAAAL,QAAQ,CAACG,OAAO,cAAAE,EAAA,uBAAAA,EAAA,CAAEC,KAAK,EAAE;EAC3B,CAAC;EAED,MAAMC,uBAAuB,GAC3BC,KAAoC,IAC5B;IACR,MAAMC,aAAa,GAAQD,KAAK,CAACE,MAAM,CAACC,KAAK;IAE7C,MAAMC,WAAW,GAAa,EAAE;IAEhC;IACA;IACAC,KAAK,CAACC,IAAI,CAACL,aAAa,CAAC,CAACM,GAAG,CAAEC,IAAS,IAAI;MAC1C;MACA,IAAI,CAAC,wBAAwB,CAACC,IAAI,CAACD,IAAI,CAACE,IAAI,CAAC,EAAE,OAAOC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACzE,MAAMC,MAAM,GAAQ,IAAIC,UAAU,EAAE;MAEpCD,MAAM,CAACE,aAAa,CAACP,IAAI,CAAC;MAE1B,OAAQK,MAAM,CAACG,MAAM,GAAG,MAAK;QAC3B;QACA,MAAMC,QAAQ,GAAW;UACvBC,SAAS,EAAEV,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,IAAI;UACrBS,SAAS,EAAE,GAAGC,IAAI,CAACC,KAAK,CAACb,IAAI,CAACc,IAAI,GAAG,IAAI,CAAC,KAAK;UAC/CC,SAAS,EAAEf,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEgB,IAAI;UACrBC,aAAa,EAAE,IAAA1C,QAAA,CAAA2C,OAAM,EAAClB,IAAI,CAACmB,YAAY,CAAC,CAACC,MAAM,EAAE;UACjDC,WAAW,EAAEhB,MAAM,CAACiB,MAAM;UAC1BC,YAAY,EAAEvB;SACf;QAEDJ,WAAW,CAAC4B,IAAI,CAACf,QAAQ,CAAC;QAE1B,IAAIb,WAAW,CAAC6B,MAAM,KAAK5B,KAAK,CAACC,IAAI,CAACL,aAAa,CAAC,CAACgC,MAAM,EAAE;UAC3D7C,WAAW,CAACgB,WAAW,CAAC;;MAE5B,CAAC;IACH,CAAC,CAAC;EACJ,CAAC;EAED,OACE,IAAA8B,aAAA,CAAAC,IAAA,WAAAC,MAAA,CAAAC,MAAA;IAAOC,OAAO,EAAC,eAAe;IAACC,SAAS,EAAC;EAA4B;IAAAC,QAAA,GACnE,IAAAN,aAAA,CAAAO,GAAA;MACEjB,IAAI,EAAC,MAAM;MACXd,IAAI,EAAC,oBAAoB;MACzBgC,EAAE,EAAC,oBAAoB;MACvBC,MAAM,EAAC,8BAA8B;MACrCC,GAAG,EAAEpD,QAAQ;MACbH,QAAQ,EAAEA,QAAQ;MAClBwD,QAAQ,EAAE9C,uBAAuB;MACjC+C,KAAK,EAAE;QAACC,OAAO,EAAE;MAAM;IAAC,EACxB,EACDzD,gBAAgB,GACf,IAAA4C,aAAA,CAAAO,GAAA,EAACnD,gBAAgB;MAAC0D,YAAY,EAAEtD;IAAoB,EAAI,GAExD,IAAAwC,aAAA,CAAAC,IAAA,EAAClD,UAAA,CAAAgE,MAAM,EAAAb,MAAA,CAAAC,MAAA;MACLa,OAAO,EAAC,WAAW;MACnBC,OAAO,EAAEzD,oBAAoB;MAC7BoD,KAAK,EAAE;QAACM,aAAa,EAAE;MAAS;IAAC;MAAAZ,QAAA,GAEjC,IAAAN,aAAA,CAAAO,GAAA,EAACvD,qBAAA,CAAAwC,OAAuB;QAACoB,KAAK,EAAE;UAACO,WAAW,EAAE;QAAK;MAAC,EAAI,EACvD9D,mBAAmB,GAAGA,mBAAmB,GAAG,cAAc;IAAA,GAE9D;EAAA,GACK;AAEZ,CAAC;AAED+D,OAAA,CAAA5B,OAAA,GAAevC,sBAAsB;AAErCA,sBAAsB,CAACoE,YAAY,GAAG;EACpClE,QAAQ,EAAE;CACX"},"metadata":{},"sourceType":"script","externalDependencies":[]}